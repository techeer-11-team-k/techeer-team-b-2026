<!-- 파일명: .agent/07_screen_blueprint.md -->
# Screen Blueprint: 화면 구조 및 데이터 설계도

> **목적**: 이 문서는 Figma AI, Google AI Studio Build, 또는 기타 디자인 도구에서 **소스 코드 지식 없이도** 즉시 화면 설계가 가능하도록 작성되었다. 모든 화면 구조, 데이터 흐름, 제약 사항을 명확히 기술한다.

---

## 서비스 개요

### 서비스 정의
**부동산 데이터 분석 및 시각화 플랫폼**

사용자가 전국 아파트 시세, 거래 내역, 지역 통계를 **조회하고 분석**할 수 있는 서비스이다.

### ⚠️ 핵심 제약 사항 (반드시 숙지)

| 할 수 있는 것 | 할 수 없는 것 |
|--------------|--------------|
| 아파트 검색 및 상세 정보 조회 | **매물 등록** (중개인/집주인이 매물 올리기) |
| 시세 차트, 가격 추이 확인 | **매매/임대 거래** (계약, 결제, 거래 성사) |
| 지역별 통계 및 랭킹 조회 | **분양 정보** (청약, 모집공고) |
| 관심 아파트 즐겨찾기 | **대출 신청, 금융 서비스** |
| 내 소유 부동산 시세 추적 | **중개사 연결, 상담 예약** |
| 뉴스 및 시황 정보 열람 | **커뮤니티, 사용자 리뷰** |
| 아파트 비교 | **실시간 호가, 급매물 알림** |

**핵심 정리**: 이 서비스는 **"데이터 조회 및 분석"** 전용이다. 거래(Trading) 기능은 일체 없다.

---

## 네비게이션 구조

### 메인 탭 (하단 네비게이션 / PC 사이드바)

```
┌────────────────────────────────────────────────────┐
│  🏠 홈    🗺️ 지도    📊 통계    ⚖️ 비교    👤 MY  │
└────────────────────────────────────────────────────┘
```

| 탭 | 아이콘 | 역할 | 비고 |
|----|--------|------|------|
| **홈** | 🏠 | 대시보드 (로그인 시) / 소개 (비로그인 시) | 메인 진입점 |
| **지도** | 🗺️ | 전국 아파트 지도 탐색 | 핵심 기능 |
| **통계** | 📊 | 전국 지표, 시도별 랭킹, 분석 데이터 | 데이터 중심 |
| **비교** | ⚖️ | 선택한 아파트들 비교 | 의사결정 도구 |
| **MY** | 👤 | 프로필, 즐겨찾기, 내 부동산, 설정 | 개인화 |

---

## 화면별 상세 설계

### 1. 홈 (Home)

#### 1-1. 비로그인 상태: 소개/Get Started 페이지

**목적**: 서비스 가치 전달, 회원가입/로그인 유도

**구성 요소**:
- Hero 섹션: 서비스 핵심 가치 한 줄 문구 + 메인 비주얼
- Feature Highlights: 핵심 기능 3~4개 카드
- CTA 버튼: "시작하기" / "로그인"
- (선택) 공개 데이터 미리보기: 전국 평균 시세 등 일부 통계

**레이아웃**:
- PC: 풀스크린 Hero + 스크롤 섹션
- Mobile: 세로 스크롤, 간결한 카드 배열

---

#### 1-2. 로그인 상태: 대시보드

**목적**: 사용자가 **즉시 핵심 정보**를 파악할 수 있도록 한다. "소개" 같은 거추장한 요소는 **일체 없음**.

**원칙**:
- 대시보드에 **모든 것을 담으려 하지 않는다**
- 통계 페이지로 빼도 되는 것들(전국 랭킹 등)은 **과감히 뺀다**
- 사용자 개인화된 정보 중심
- PC 환경에서는 사이드바 대신 메뉴 탭들을 상단바에 배치.

**대시보드에 포함되는 데이터**:

| 섹션 | 내용 | 데이터 소스 |
|------|------|------------|
| 내 자산 현황 | 등록한 내 부동산의 현재 시세 합계, 변동률 | `my_properties` + 시세 계산 |
| 관심 지역 시세 | 즐겨찾기한 지역의 평균 시세 변화 | `favorite_locations` + 시세 |
| 최근 본 아파트 | 최근 조회한 아파트 목록 | `recent_views` |
| 시세 차트 | 관심 지역 or 전국 시세 추이 | `house_scores` |
| 뉴스 요약 | 최신 부동산 뉴스 2~3개 | 뉴스 크롤링 API |

**대시보드에서 제외, 통계로 이동할 것들**:
- ❌ 전국 아파트 랭킹 (거래량 TOP, 상승률 TOP)
- ❌ 시도별 히트맵
- ❌ RVOL, 4분면 분석
- ❌ 인구 이동 데이터
- ❌ 전국 평균 지표

---

### 2. 지도 (Map)

**목적**: 지역/아파트를 시각적으로 탐색하고 발견

**핵심 UX**:
- 지도가 화면의 **80% 이상** 차지
- UI 오버레이 최소화
- 빠른 마커 로딩

**구성 요소**:
- Kakao Map (전체 화면)
- 검색바 (상단, 글래스모피즘)
- 필터 버튼 (가격대, 면적, 거래 유형)
- 현재 위치 버튼
- 줌 컨트롤

**마커 표시 정보**:
- 아파트명 (축약)
- 최근 거래가 또는 평균가
- 가격 변동 방향 (상승/하락 색상)

**아파트 선택 시**:
- PC: 우측 패널에 상세 정보 슬라이드 인
- Mobile: 바텀 시트로 상세 정보 표시

**표시 가능한 데이터**:
| 정보 | 가능 여부 | 비고 |
|------|---------|------|
| 아파트 위치 (좌표) | ✅ | `apart_details.geometry` |
| 아파트명 | ✅ | `apartments.apt_name` |
| 최근 매매가 | ✅ | `sales.trans_price` |
| 최근 전세가 | ✅ | `rents.deposit_price` |
| 세대수, 동수 | ✅ | `apart_details` |
| 사진/이미지 | ❌ | 데이터 없음 |
| 매물 현황 | ❌ | 데이터 없음 (매물 시스템 없음) |

---

### 3. 통계 (Statistics)

**목적**: 전국/지역별 거시적 데이터 분석 제공

**원칙**: 대시보드에서 뺀 "전국 지표" 관련 데이터는 **모두 여기로**

**섹션 구성**:

#### 3-1. 전국 시세 현황
- 전국 평균 평당가 (매매/전세)
- 전국 거래량 추이 차트
- 시도별 상승률 히트맵

#### 3-2. 랭킹
- 거래량 TOP 아파트
- 상승률 TOP 아파트
- 하락률 TOP 아파트
- 시도별 필터 지원

#### 3-3. RVOL (상대 거래량)
- 현재 거래량 vs 평균 거래량 비교
- 시도별 RVOL 수치

#### 3-4. 4분면 분석
- 매매 거래량 변화 vs 전세 거래량 변화
- 지역별 시장 상태 분류:
  - 1분면: 매수 전환 (매매↑ 전세↓)
  - 2분면: 임대 선호/관망 (매매↓ 전세↑)
  - 3분면: 시장 위축 (매매↓ 전세↓)
  - 4분면: 활성화 (매매↑ 전세↑)

#### 3-5. 인구 이동 데이터
- 시도별 전입/전출 현황
- 순이동 인구수 차트

**통계에서 사용하는 데이터**:
| 데이터 | 테이블 | 비고 |
|--------|--------|------|
| 주택가격지수 | `house_scores` | 2017.11=100 기준 |
| 거래량 | `house_volumes` | 월별 집계 |
| 매매 거래 | `sales` | 실거래가 |
| 전월세 거래 | `rents` | 전세/월세 |
| 인구 이동 | `population_movements` | KOSIS 통계청 |

---

### 4. 비교 (Compare)

**목적**: 관심 아파트 2~4개를 나란히 비교

**비교 가능 항목**:
| 항목 | 가능 여부 | 데이터 |
|------|---------|--------|
| 아파트명, 주소 | ✅ | `apartments`, `apart_details` |
| 최근 거래가 | ✅ | `sales`, `rents` |
| 평형대별 시세 | ✅ | 전용면적 그룹핑 |
| 세대수, 동수, 층수 | ✅ | `apart_details` |
| 건축년도, 사용승인일 | ✅ | `apart_details` |
| 주차대수 | ✅ | `apart_details` |
| 난방방식 | ✅ | `apart_details` |
| 지하철역 거리 | ✅ | `apart_details.subway_*` |
| 시세 추이 차트 | ✅ | 거래 내역 집계 |
| 내부 사진 | ❌ | 데이터 없음 |
| 관리비 | ❌ | 데이터 없음 |
| 학군 정보 | △ | `educationFacility` (제한적) |

**레이아웃**:
- PC: 가로 나열 (2~4개 컬럼)
- Mobile: 스와이프 카드 또는 세로 스크롤 비교

---

### 5. MY 페이지

**구성 요소**:

#### 5-1. 프로필
- 프로필 이미지, 이름, 이메일
- Clerk 인증 연동


#### 5-4. 최근 본 아파트
- 최근 조회한 아파트 목록 (`recent_views`)
- 시간순 정렬

#### 5-5. 최근 검색어
- 최근 검색한 키워드 (`recent_searches`)

#### 5-6. 설정
- 다크모드 토글
- 로그아웃

---

## 아파트 상세 페이지

**진입 경로**: 지도에서 마커 클릭 / 검색 결과 클릭 / 즐겨찾기에서 클릭

### 표시 정보 (상세)

| 섹션 | 항목 | 데이터 소스 | 비고 |
|------|------|------------|------|
| **기본 정보** | 아파트명 | `apartments.apt_name` | |
| | 도로명주소 | `apart_details.road_address` | |
| | 지번주소 | `apart_details.jibun_address` | |
| | 시군구 | `states.city_name`, `region_name` | |
| **건물 정보** | 총 세대수 | `apart_details.total_household_cnt` | |
| | 총 동수 | `apart_details.total_building_cnt` | |
| | 최고층 | `apart_details.highest_floor` | |
| | 사용승인일 | `apart_details.use_approval_date` | 연식 계산 |
| | 주차대수 | `apart_details.total_parking_cnt` | 세대당 계산 |
| | 난방방식 | `apart_details.code_heat_nm` | |
| | 복도유형 | `apart_details.hallway_type` | |
| **시세 정보** | 최근 매매가 | `sales.trans_price` | 가장 최근 거래 |
| | 최근 전세가 | `rents.deposit_price` | |
| | 평형대별 시세 | 면적 그룹핑 | |
| | 시세 추이 차트 | 거래 내역 집계 | 월별/연도별 |
| **교통** | 지하철역 | `apart_details.subway_station` | |
| | 지하철 노선 | `apart_details.subway_line` | |
| | 도보 시간 | `apart_details.subway_time` | |
| **교육** | 주변 학교 | `apart_details.educationFacility` | 제한적 |
| **거래 내역** | 최근 거래 목록 | `sales`, `rents` | 날짜, 가격, 층, 면적 |

### ❌ 표시 불가 (데이터 없음)

- 아파트 외관/내부 사진
- 매물 현황, 호가
- 관리비 내역
- 주변 편의시설 (마트, 병원 등)
- 커뮤니티 리뷰
- 입주자 평점

---

## 데이터 인벤토리 (전체)

### 핵심 엔티티

| 테이블 | 설명 | 주요 필드 |
|--------|------|----------|
| `apartments` | 아파트 기본 정보 | apt_id, apt_name, kapt_code |
| `apart_details` | 아파트 상세 정보 | 주소, 세대수, 좌표, 건물정보, 교통정보 |
| `sales` | 매매 거래 내역 | 거래가, 면적, 층, 계약일, 취소여부 |
| `rents` | 전월세 거래 내역 | 보증금, 월세, 면적, 층, 계약일 |
| `states` | 지역 정보 | 시도명, 시군구명, 지역코드 |
| `house_scores` | 주택가격지수 | 지역ID, 년월, 지수값, 변동률 |
| `house_volumes` | 거래량 지표 | 지역ID, 년월, 거래량 |
| `population_movements` | 인구 이동 | 전입, 전출, 순이동 |

### 사용자 관련 엔티티

| 테이블 | 설명 | 용도 |
|--------|------|------|
| `accounts` | 사용자 계정 | Clerk 연동 |
| `favorite_apartments` | 아파트 즐겨찾기 | 별칭, 메모 포함 |
| `favorite_locations` | 지역 즐겨찾기 | |
| `my_properties` | 내 부동산 | 소유 부동산 추적 |
| `recent_views` | 최근 본 아파트 | |
| `recent_searches` | 최근 검색어 | |

### 외부 데이터

| 데이터 | 출처 | 갱신 주기 |
|--------|------|----------|
| 실거래가 | 국토교통부 API | 월 1회 |
| 주택가격지수 | KB부동산 | 월 1회 |
| 인구이동 | KOSIS 통계청 | 월 1회 |
| 부동산 뉴스 | 웹 크롤링 | 실시간 |

---

## 레이아웃 원칙 요약

### PC (Desktop Web)

| 요소 | 규격 |
|------|------|
| 최소 너비 | 1024px |
| 사이드바 | 240px 고정 또는 접힘 |
| 메인 콘텐츠 | Fluid (나머지 영역) |
| 헤더 높이 | 64px |
| 그리드 | 12컬럼 |

### Mobile Web

| 요소 | 규격 |
|------|------|
| 기준 너비 | 375px (iPhone SE) ~ 428px (Pro Max) |
| 하단 네비게이션 | 56px + Safe Area |
| 터치 타겟 | 최소 48×48px |
| 바텀 시트 | Drag handle + 스냅 포인트 |

### 반응형 브레이크포인트

| 이름 | 범위 | 적용 |
|------|------|------|
| mobile | ~767px | 단일 컬럼, 하단 네비게이션 |
| tablet | 768px~1023px | 2컬럼, 적응형 사이드바 |
| desktop | 1024px~ | 멀티 컬럼, 사이드바 표시 |

---

## 🎨 시각 디자인 가이드라인

### 가격 표시: 스마트 타이포그래피

부동산 서비스에서 **가격은 가장 중요한 정보**이다. 단순히 "3억 4,000만원"을 동일 스타일로 표시하지 말고, **숫자와 단위를 구분**하여 가독성을 극대화한다.

**원칙**:
- 숫자(3, 4000)는 **크고 굵게, 강조 색상**
- 단위(억, 만원)는 **작고 가볍게, 서브 색상**
- 변동률은 가격 바로 아래/옆에, 방향에 맞는 색상(상승=빨강, 하락=파랑)

**예시**:
```
잘못된 예:
  "3억 4,000만원"  ← 전체가 동일 스타일 (구분 안됨)

올바른 예:
  3억 4,000만원
  ↑ ↑     ↑
  │ │     └── 단위: 더 작고, 연한 회색 (text-slate-500)
  │ └──────── 숫자: 크고 굵게 (text-slate-900, text-4xl, font-bold)
  └────────── "억" 앞 숫자도 동일하게 강조

시각적 표현:
┌────────────────────────────────────┐
│   3억 4,000만원                    │  ← 숫자 크고 진하게
│   ▲ +2.3% (전월 대비)             │  ← 변동률 작고 빨간색
└────────────────────────────────────┘
```

**라이트/다크 모드 색상**:

| 요소 | Light Mode | Dark Mode |
|------|------------|-----------|
| 숫자 (억 단위) | `text-slate-900` | `text-slate-100` |
| 숫자 (만원 단위) | `text-slate-800` | `text-slate-200` |
| 단위 (억, 만원) | `text-slate-500` | `text-slate-400` |
| 상승률 | `text-red-600` | `text-red-400` |
| 하락률 | `text-blue-600` | `text-blue-400` |
| 보합 | `text-slate-500` | `text-slate-400` |

---

### 카드 사용 원칙

**"카드 지옥" 금지**. 모든 것을 카드로 감싸면 시각적으로 지루하고 답답하다.

**언제 카드를 사용하는가?**
- ✅ 독립적인 정보 단위 (아파트 1개, 거래 내역 1건)
- ✅ 액션이 있는 아이템 (클릭 가능한 요소)
- ✅ 시각적으로 그룹핑이 필요한 작은 정보 묶음

**언제 카드를 사용하지 않는가?**
- ❌ 페이지 전체를 감싸는 용도
- ❌ 카드 안에 또 카드를 넣는 중첩
- ❌ 순차적 정보(리스트)에 개별 카드 남용

**대안**:
- 구분선 (`border-b`) 으로 영역 구분
- 여백 (`gap`, `space-y`) 으로 그룹 구분
- 배경색 변화 (`bg-slate-50` vs `bg-white`) 로 섹션 구분

**레퍼런스 (첫 번째 이미지 스타일)**:
```
┌─────────────────────────────────────────────┐
│  $24,882                              ↗     │  ← 큰 숫자, 아이콘 버튼만
│  ▲ 23.56%  Prev month                      │  ← 여백 충분, 밀도 낮음
│                                             │
│  ▁▂▃▅▆█▇▅▃▂▁▂▃▄▅▆▇█▆▄▃▂▁  ← 차트가 넓게    │
│                                             │
└─────────────────────────────────────────────┘
     ↑
     카드 하나 안에 핵심 정보만. 중첩 카드 없음.
```

---

### 차트와 숫자의 융합

**문제**: 차트가 독립된 박스처럼 "박혀있는" 느낌

**해결**: 숫자를 차트 위/옆에 오버레이하여 통합된 느낌

**잘못된 예**:
```
┌─────────────────────────────────┐
│  제목: 시세 추이                 │
│  설명: 최근 6개월                │
├─────────────────────────────────┤
│  ┌─────────────────────────┐   │  ← 차트가 박스 안에 갇힘
│  │       (차트 영역)        │   │
│  └─────────────────────────┘   │
└─────────────────────────────────┘
```

**올바른 예**:
```
┌─────────────────────────────────┐
│  $24,882                  ↗    │  ← 숫자가 차트 위에 오버레이
│  ▲ 23.56%                      │
│      ▁▂▃▅▆█▇▅▃▂ ← 차트 배경처럼 │  ← 차트가 카드에 녹아듦
└─────────────────────────────────┘
```

---

### 정보 위계 (Information Hierarchy)

| 레벨 | 용도 | 스타일 (Light) | 스타일 (Dark) |
|-----|------|---------------|---------------|
| **H1** | 페이지 제목, 핵심 숫자 | 28-40px, Bold, slate-900 | slate-100 |
| **H2** | 섹션 제목 | 20-24px, Semibold, slate-800 | slate-200 |
| **H3** | 카드 제목 | 16-18px, Medium, slate-700 | slate-300 |
| **Body** | 본문 텍스트 | 14-16px, Regular, slate-600 | slate-400 |
| **Caption** | 부가 설명 | 12-14px, Regular, slate-500 | slate-500 |
| **Muted** | 메타 정보 | 10-12px, Regular, slate-400 | slate-600 |

---

### 로딩 상태: Skeleton UI

단순 스피너 대신, **실제 콘텐츠 형태를 미리 보여주는 Skeleton UI** 사용.

**이점**:
- 레이아웃 힌트 제공 (CLS 방지)
- 로딩 중에도 화면이 채워져 보임
- 사용자가 "무엇이 올지" 예상 가능

**Skeleton 예시**:
```
┌─────────────────────────────────┐
│  ████████████       ███████    │  ← 제목 자리
│  ██████████████████████████    │
├─────────────────────────────────┤
│  ┌────┐                         │
│  │░░░░│ ██████████  ██████     │  ← 아이템 자리
│  └────┘ ████████    ████       │
├─────────────────────────────────┤
│  ┌────┐                         │
│  │░░░░│ ██████████  ██████     │
│  └────┘ ████████    ████       │
└─────────────────────────────────┘

░░ = 이미지 Skeleton (회색 박스)
██ = 텍스트 Skeleton (Shimmer 애니메이션)
```

---

### 컬러 시스템

**메인 컬러**:
- 기존 Sky/Blue 계열 유지
- 포인트: Lime/Green 추가 (레퍼런스 이미지 참고)

**가격 변동 컬러 (한국 부동산 컨벤션)**:
| 상태 | 색상 | 용도 |
|-----|-----|-----|
| 상승 | Red (빨강) | 가격↑, 거래량↑ |
| 하락 | Blue (파랑) | 가격↓, 거래량↓ |
| 보합 | Gray (회색) | 변동 없음 |

**다크모드 기본 배경**:
- 배경: `zinc-950` ~ `zinc-900`
- 카드: `zinc-900` ~ `zinc-800`
- 강조: Lime/Green 포인트

---

## 주의사항 (디자인 도구용)

### ✅ 이렇게 설계하세요

1. **매물 등록 UI 만들지 마세요** - 이 서비스에 매물 등록 기능은 없습니다.
2. **결제/거래 흐름 만들지 마세요** - 트레이딩 기능이 없습니다.
4. **차트는 반드시 포함** - 시세 추이, 거래량 등 시각화가 핵심입니다.

### ❌ 이것들은 피하세요

- "매물 올리기" 버튼
- "계약하기", "구매하기" CTA
- 중개사 연락처, 상담 버튼
- 분양/청약 섹션
- 리뷰/평점 시스템
- 실시간 채팅

---

## 화면 리스트 체크리스트

| 화면 | PC | Mobile | 우선순위 |
|------|----|----|---------|
| 홈 - 비로그인 (소개) | ✅ | ✅ | P1 |
| 홈 - 로그인 (대시보드) | ✅ | ✅ | P1 |
| 지도 탐색 | ✅ | ✅ | P1 |
| 아파트 상세 | ✅ | ✅ | P1 |
| 검색 결과 | ✅ | ✅ | P1 |
| 통계 - 전국 현황 | ✅ | ✅ | P2 |
| 통계 - 랭킹 | ✅ | ✅ | P2 |
| 통계 - RVOL/4분면 | ✅ | ✅ | P2 |
| 비교 | ✅ | ✅ | P2 |
| MY - 프로필 | ✅ | ✅ | P2 |
| MY - 내 부동산 | ✅ | ✅ | P2 |
| MY - 즐겨찾기 | ✅ | ✅ | P2 |
| 뉴스/시황 | ✅ | ✅ | P3 |
| 설정 | ✅ | ✅ | P3 |
| 로그인/회원가입 | ✅ | ✅ | P1 (Clerk 연동) |
