<div id="view-logs" class="view-section">
    <h4 class="mb-4 fw-bold">시스템 로그</h4>
    
    <div class="card bg-dark text-light font-monospace">
        <div class="card-header bg-dark border-secondary d-flex justify-content-between align-items-center">
            <span><i class="fas fa-file-alt me-2"></i>backend.log</span>
            <div>
                <select id="log-lines-select" class="form-select form-select-sm d-inline-block w-auto me-2" onchange="loadLogs()">
                    <option value="50">50줄</option>
                    <option value="100" selected>100줄</option>
                    <option value="200">200줄</option>
                    <option value="500">500줄</option>
                </select>
                <button class="btn btn-sm btn-outline-light" onclick="window.loadLogs()">
                    <i class="fas fa-sync me-2"></i>새로고침
                </button>
            </div>
        </div>
        <div class="card-body overflow-auto p-3" id="log-content" style="height: 600px; font-size: 0.8rem; white-space: pre-wrap;">
            로그를 불러오는 중...
        </div>
    </div>
</div>

<script>
async function initLogs() {
    await loadLogs();
}
window.initLogs = initLogs;

async function loadLogs() {
    const lines = document.getElementById('log-lines-select').value || 100;
    const el = document.getElementById('log-content');
    
    try {
        const res = await fetch(`${API_BASE}/logs?lines=${lines}`);
        const json = await res.json();
        
        if(json.success && json.logs) {
            el.innerText = json.logs.join('');
            el.scrollTop = el.scrollHeight;
        } else {
            el.innerText = `로그를 불러올 수 없습니다: ${json.message || '알 수 없는 오류'}`;
        }
    } catch(e) {
        console.error(e);
        el.innerText = `오류가 발생했습니다: ${e.message}`;
    }
}
window.loadLogs = loadLogs;
</script>
