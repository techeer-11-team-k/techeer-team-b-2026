# ============================================================
# ğŸ“Š Prometheus ì„¤ì • íŒŒì¼
# ============================================================
# ì „ì²´ ìŠ¤íƒ ë©”íŠ¸ë¦­ ìˆ˜ì§‘ ì„¤ì • (FastAPI, Redis, PostgreSQL)
# ============================================================

global:
  scrape_interval: 15s  # 15ì´ˆë§ˆë‹¤ ë©”íŠ¸ë¦­ ìˆ˜ì§‘
  evaluation_interval: 15s  # 15ì´ˆë§ˆë‹¤ ê·œì¹™ í‰ê°€
  scrape_timeout: 10s  # íƒ€ì„ì•„ì›ƒ ì„¤ì •
  external_labels:
    cluster: 'realestate-platform'
    environment: 'production'

# ìŠ¤í¬ë˜í•‘ ì„¤ì •
scrape_configs:
  # FastAPI ë°±ì—”ë“œ ë©”íŠ¸ë¦­
  - job_name: 'fastapi-backend'
    scrape_interval: 15s
    scrape_timeout: 10s
    metrics_path: '/metrics'
    static_configs:
      - targets: ['backend:8000']
        labels:
          service: 'backend'
          instance: 'backend-1'
          job: 'fastapi-backend'

  # Redis Exporter ë©”íŠ¸ë¦­
  - job_name: 'redis'
    scrape_interval: 15s
    scrape_timeout: 10s
    static_configs:
      - targets: ['redis-exporter:9121']
        labels:
          service: 'redis'
          instance: 'redis-1'
          job: 'redis'

  # PostgreSQL Exporter ë©”íŠ¸ë¦­
  - job_name: 'postgres-exporter'
    scrape_interval: 15s
    scrape_timeout: 10s
    static_configs:
      - targets: ['postgres-exporter:9187']
        labels:
          service: 'postgres'
          instance: 'rds-postgresql'

  # Prometheus ìì²´ ë©”íŠ¸ë¦­
  - job_name: 'prometheus'
    scrape_interval: 15s
    static_configs:
      - targets: ['localhost:9090']
        labels:
          service: 'prometheus'
          instance: 'prometheus-1'
          job: 'prometheus'