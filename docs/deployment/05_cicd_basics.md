# CI/CD 기초 가이드

## 📚 CI/CD란 무엇인가?

### CI (Continuous Integration) - 지속적 통합

**정의:**
개발자들이 코드를 작성하고 Git에 푸시할 때마다 **자동으로 빌드하고 테스트**하는 방법입니다.

**왜 필요한가요?**
- 여러 명이 같은 프로젝트에서 작업할 때, 코드가 충돌하거나 버그가 생길 수 있습니다
- 매번 수동으로 테스트하는 것은 번거롭고 실수하기 쉽습니다
- CI를 사용하면 **자동으로** 코드를 검사하고, 문제가 있으면 즉시 알려줍니다

**예시 상황:**
```
👨‍💻 개발자 A: 새 기능 추가 → Git에 푸시
    ⬇️
🤖 CI 시스템: 자동으로 코드 검사
    ├─ 코드 스타일 검사 (린트)
    ├─ 단위 테스트 실행
    ├─ 빌드 성공 여부 확인
    └─ 결과를 개발자에게 알림
    ⬇️
✅ 모든 테스트 통과 → 안전하게 병합 가능
❌ 테스트 실패 → 문제를 즉시 수정
```

---

### CD (Continuous Deployment/Delivery) - 지속적 배포

**정의:**
테스트를 통과한 코드를 **자동으로 프로덕션 환경에 배포**하는 방법입니다.

**왜 필요한가요?**
- 수동 배포는 시간이 오래 걸리고 실수하기 쉽습니다
- 버그 수정이나 새 기능을 빠르게 사용자에게 전달할 수 있습니다
- 배포 과정을 표준화하여 일관성을 유지합니다

**두 가지 종류:**

1. **Continuous Delivery (지속적 전달)**
   - 배포 준비가 된 상태로 만들기
   - **최종 배포는 수동으로** 버튼 클릭

2. **Continuous Deployment (지속적 배포)**
   - 테스트 통과 시 **자동으로 완전히 배포**
   - 사람의 개입 없이 프로덕션까지 자동화

**예시 상황:**
```
👨‍💻 개발자: 코드 푸시
    ⬇️
🤖 CI: 자동 테스트
    ⬇️
✅ 테스트 통과
    ⬇️
🚀 CD: 자동 배포
    ├─ Staging 환경에 배포
    ├─ 테스트 확인
    └─ Production 환경에 배포
    ⬇️
🎉 사용자가 즉시 새 기능 사용 가능
```

---

## 🎯 CI/CD로 무엇을 할 수 있나요?

### 1. 자동 테스트

```yaml
# 코드 푸시할 때마다 자동으로:
- 코드 스타일 검사 (ESLint, Prettier)
- 단위 테스트 실행 (Jest, Pytest)
- 통합 테스트 실행
- 보안 취약점 스캔
```

### 2. 자동 빌드

```yaml
# 테스트 통과 시 자동으로:
- 프론트엔드 빌드 (npm run build)
- 백엔드 Docker 이미지 생성
- 모바일 앱 빌드 (EAS Build)
```

### 3. 자동 배포

```yaml
# 빌드 성공 시 자동으로:
- Vercel에 프론트엔드 배포
- AWS에 백엔드 배포
- 데이터베이스 마이그레이션 실행
```

### 4. 알림 및 리포트

```yaml
# 배포 결과를 자동으로:
- Slack/Discord 알림
- 이메일 발송
- GitHub PR에 상태 표시
```

---

## 🔄 CI/CD 워크플로우 전체 흐름

```
┌─────────────────────────────────────────────────────────────┐
│  1️⃣ 개발자가 코드 작성 및 푸시                               │
│     git add . && git commit -m "새 기능" && git push        │
└────────────────┬────────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────────┐
│  2️⃣ GitHub Actions 자동 트리거                              │
│     - GitHub이 푸시 이벤트 감지                              │
│     - .github/workflows/ci.yml 실행                         │
└────────────────┬────────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────────┐
│  3️⃣ CI 단계: 코드 검증                                      │
│     ✓ 의존성 설치 (npm install)                             │
│     ✓ 코드 스타일 검사 (ESLint)                             │
│     ✓ 단위 테스트 실행 (Jest)                               │
│     ✓ 빌드 테스트 (npm run build)                           │
└────────────────┬────────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────────┐
│  4️⃣ CD 단계: 자동 배포                                      │
│     ✓ Staging 환경 배포                                     │
│     ✓ 통합 테스트 실행                                       │
│     ✓ Production 배포 (main 브랜치만)                       │
└────────────────┬────────────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────────────┐
│  5️⃣ 알림 및 완료                                            │
│     ✓ Slack에 배포 완료 알림                                │
│     ✓ GitHub PR에 상태 표시                                 │
│     ✓ 배포 로그 저장                                         │
└─────────────────────────────────────────────────────────────┘
```

---

## 🛠️ GitHub Actions란?

**정의:**
GitHub에서 제공하는 무료 CI/CD 서비스입니다.

**특징:**
- GitHub 저장소와 완벽하게 통합
- 무료 플랜: 월 2,000분 무료 (공개 저장소는 무제한)
- YAML 파일로 쉽게 설정
- 다양한 미리 만들어진 액션 사용 가능

**기본 구조:**

```yaml
# .github/workflows/ci.yml
name: CI/CD Pipeline          # 워크플로우 이름

on:                           # 언제 실행할지
  push:                       # 코드 푸시할 때
    branches: [main, dev]     # main, dev 브랜치만
  pull_request:               # PR 생성/업데이트할 때
    branches: [main]

jobs:                         # 실행할 작업들
  test:                       # 작업 이름
    runs-on: ubuntu-latest    # 실행 환경 (Ubuntu 서버)
    
    steps:                    # 순차적으로 실행할 단계들
      - name: 코드 체크아웃
        uses: actions/checkout@v3
      
      - name: Node.js 설치
        uses: actions/setup-node@v3
        with:
          node-version: '20'
      
      - name: 의존성 설치
        run: npm install
      
      - name: 테스트 실행
        run: npm test
```

---

## 📊 CI/CD가 없을 때 vs 있을 때

### ❌ CI/CD 없이 수동 배포 (전통적 방법)

```
1. 개발자가 로컬에서 코드 작성
2. 수동으로 테스트 실행 (가끔 깜빡함 😅)
3. Git에 푸시
4. 다른 개발자가 코드 리뷰
5. 수동으로 서버 접속
6. 수동으로 코드 pull
7. 수동으로 빌드
8. 수동으로 서버 재시작
9. 수동으로 동작 확인

⏰ 소요 시간: 30분 ~ 2시간
😰 문제점:
   - 사람이 실수할 수 있음
   - 시간이 오래 걸림
   - 배포 과정이 일관되지 않음
   - 문제 발생 시 롤백이 어려움
```

### ✅ CI/CD로 자동 배포

```
1. 개발자가 로컬에서 코드 작성
2. Git에 푸시
3. 🤖 자동으로 테스트
4. 🤖 자동으로 빌드
5. 🤖 자동으로 배포
6. 🤖 자동으로 알림

⏰ 소요 시간: 5분 ~ 10분
😊 장점:
   - 일관된 배포 프로세스
   - 빠른 배포
   - 자동 테스트로 버그 조기 발견
   - 쉬운 롤백
   - 배포 로그 자동 저장
```

---

## 🎓 실제 예시: 버그 수정 배포

### 시나리오: 사용자가 버그 발견 🐛

**전통적 방법 (수동 배포):**
```
09:00 - 사용자가 버그 리포트
09:30 - 개발자가 버그 확인
10:00 - 버그 수정 시작
11:00 - 수정 완료, 로컬 테스트
11:30 - Git에 푸시
12:00 - 코드 리뷰
13:00 - 점심 시간 🍽️
14:00 - 서버에 수동 배포 시작
14:30 - 배포 중 오류 발생 😱
15:00 - 오류 수정 후 재배포
15:30 - 배포 완료, 사용자 확인

📊 총 소요 시간: 6.5시간
```

**CI/CD 방법 (자동 배포):**
```
09:00 - 사용자가 버그 리포트
09:30 - 개발자가 버그 확인
10:00 - 버그 수정 시작
11:00 - 수정 완료, Git에 푸시
11:05 - 🤖 자동 테스트 시작
11:07 - 🤖 테스트 통과
11:08 - 🤖 자동 배포 시작
11:12 - 🤖 배포 완료, Slack 알림
11:15 - 개발자 확인

📊 총 소요 시간: 2시간 15분
🚀 75% 시간 절약!
```

---

## 🌟 CI/CD의 핵심 가치

### 1. 빠른 피드백
```
코드 푸시 → 5분 안에 테스트 결과 확인
버그 발견 → 즉시 수정 및 재배포
```

### 2. 자동화
```
반복적인 작업 자동화
→ 개발자는 코딩에만 집중
```

### 3. 일관성
```
모든 배포가 동일한 프로세스
→ "내 컴퓨터에서는 되는데?" 문제 해결
```

### 4. 안전성
```
자동 테스트로 버그 조기 발견
→ 프로덕션 버그 감소
```

### 5. 협업
```
팀원 모두가 동일한 프로세스 사용
→ 누구나 쉽게 배포 가능
```

---

## 📝 다음 단계

CI/CD의 개념을 이해했다면, 다음 문서를 확인하세요:

1. **GitHub Actions 설정**: [06_github_actions_setup.md](./06_github_actions_setup.md)
2. **프론트엔드 CI/CD**: [07_frontend_cicd.md](./07_frontend_cicd.md)
3. **백엔드 CI/CD**: [08_backend_cicd.md](./08_backend_cicd.md)
4. **전체 파이프라인**: [09_complete_pipeline.md](./09_complete_pipeline.md)

---

## 💡 자주 묻는 질문 (FAQ)

### Q1: CI/CD가 꼭 필요한가요?
**A:** 소규모 프로젝트에서는 선택사항이지만, 다음 상황에서는 강력히 권장합니다:
- 여러 명이 함께 작업하는 경우
- 자주 배포하는 경우
- 프로덕션 환경이 중요한 경우

### Q2: CI/CD 설정이 어렵나요?
**A:** GitHub Actions는 초보자도 쉽게 시작할 수 있습니다:
- YAML 파일 하나로 시작
- 많은 예제와 템플릿 제공
- 단계적으로 기능 추가 가능

### Q3: 비용이 드나요?
**A:** GitHub Actions는:
- 공개 저장소: 무료 무제한
- 비공개 저장소: 월 2,000분 무료 (보통 충분)
- 추가 사용: 분당 $0.008

### Q4: 기존 프로젝트에 추가할 수 있나요?
**A:** 네, 언제든지 추가 가능합니다:
- 기존 코드 수정 불필요
- `.github/workflows/` 폴더만 추가
- 점진적으로 기능 확장

### Q5: CI/CD가 실패하면 어떻게 되나요?
**A:** 안전합니다:
- 테스트 실패 시 자동 배포 중단
- 기존 프로덕션 환경은 영향 없음
- 문제 수정 후 다시 푸시

---

**다음 문서에서는 실제로 GitHub Actions를 설정하는 방법을 알아봅니다! 🚀**
