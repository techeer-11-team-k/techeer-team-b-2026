# ì•„íŒŒíŠ¸ ë§¤ì¹­ ë¡œì§ ë¶„ì„ ë° ê°œì„  ë°©ì•ˆ

## ğŸ“‹ ëª©ì°¨
1. [í˜„ì¬ ë¡œì§ ì‘ë™ ë°©ì‹](#í˜„ì¬-ë¡œì§-ì‘ë™-ë°©ì‹)
2. [ë¯¸ìŠ¤ë§¤ì¹­ ë°œìƒ ì›ì¸](#ë¯¸ìŠ¤ë§¤ì¹­-ë°œìƒ-ì›ì¸)
3. [í•´ê²° ë°©ì•ˆ](#í•´ê²°-ë°©ì•ˆ)
4. [êµ¬í˜„ ë‚´ìš©](#êµ¬í˜„-ë‚´ìš©)
5. [ê²€ì¦ ë° ëª¨ë‹ˆí„°ë§](#ê²€ì¦-ë°-ëª¨ë‹ˆí„°ë§)

---

## í˜„ì¬ ë¡œì§ ì‘ë™ ë°©ì‹

### 1. ë°ì´í„° ìˆ˜ì§‘ íë¦„

#### 1.1 API í˜¸ì¶œ ë° ë°ì´í„° ì¶”ì¶œ
```
êµ­í† êµí†µë¶€ API í˜¸ì¶œ (ì‹œêµ°êµ¬ ì½”ë“œ + ë…„ì›”)
    â†“
API ì‘ë‹µ íŒŒì‹± (ì•„íŒŒíŠ¸ëª…, ì§€ë²ˆ, ìë©´ë™ì½”ë“œ, ê±´ì¶•ë…„ë„ ë“±)
    â†“
DBì—ì„œ í•´ë‹¹ ì‹œêµ°êµ¬ì˜ ëª¨ë“  ì•„íŒŒíŠ¸ ë¦¬ìŠ¤íŠ¸ ì¡°íšŒ
    â†“
ë‹¤ë‹¨ê³„ ë§¤ì¹­ ì‹œë„
```

**ì£¼ìš” íŒŒì¼:**
- `backend/app/services/data_collection/rent_collection/service.py`
- `backend/app/services/data_collection/sale_collection/service.py`
- `backend/app/services/data_collection/utils/matching.py`

#### 1.2 ë‹¤ë‹¨ê³„ ë§¤ì¹­ ì „ëµ

í˜„ì¬ ì‹œìŠ¤í…œì€ ì•„ë˜ì˜ ë‹¨ê³„ë³„ ë§¤ì¹­ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

**0ë‹¨ê³„: ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ + ì§€ë²ˆ ì •í™• ë§¤ì¹­ (ìµœìš°ì„ )**
```python
# ë§¤ì¹­ ì¡°ê±´:
- ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ (ì‹œë„ 2ìë¦¬ + ì‹œêµ°êµ¬ 3ìë¦¬ + ìë©´ë™ 5ìë¦¬)
- ì§€ë²ˆ ë³¸ë²ˆ-ë¶€ë²ˆ ì •í™• ì¼ì¹˜
- âœ… ì´ë¦„ê³¼ ë¬´ê´€í•˜ê²Œ ë§¤ì¹­ (ê°€ì¥ ì‹ ë¢°ë„ ë†’ìŒ)
```

**1ë‹¨ê³„: ì‹œêµ°êµ¬ ì½”ë“œ í•„í„°ë§**
```python
# API 5ìë¦¬ ì‹œêµ°êµ¬ ì½”ë“œ â†’ DB 10ìë¦¬ region_code ë³€í™˜
# í•´ë‹¹ ì‹œêµ°êµ¬ì˜ ì•„íŒŒíŠ¸ë§Œ í›„ë³´ë¡œ ì„ ì •
```

**2ë‹¨ê³„: ìë©´ë™ëª… í•„í„°ë§**
```python
# APIì˜ umd_nm (ìë©´ë™ëª…)ìœ¼ë¡œ region ë§¤ì¹­
# ë™ ì´ë¦„ ì •ê·œí™” ë° ë¶€ë¶„ ì¼ì¹˜ í—ˆìš©
# ì˜ˆ: "ì˜ê´‘ì ë‹¨ì£¼ë¦¬" â†’ "ë‹¨ì£¼ë¦¬" ë§¤ì¹­
```

**3ë‹¨ê³„: ì´ë¦„ ê¸°ë°˜ ë§¤ì¹­**
```python
# ApartmentMatcher.match_apartment() í˜¸ì¶œ
# ë³µì¡í•œ ë‹¤ë‹¨ê³„ ë§¤ì¹­ ë¡œì§ ì ìš© (ì•„ë˜ ìƒì„¸ ì„¤ëª…)
```

**4ë‹¨ê³„: ì „ì²´ í›„ë³´ ì¬ì‹œë„ (ë™ ê²€ì¦ í•„ìˆ˜)**
```python
# í•„í„°ë§ëœ í›„ë³´ì—ì„œ ì‹¤íŒ¨ ì‹œ
# ì „ì²´ í›„ë³´ë¡œ ì¬ì‹œë„í•˜ë˜ require_dong_match=True ê°•ì œ
```

### 2. ì´ë¦„ ê¸°ë°˜ ë§¤ì¹­ ìƒì„¸ ë¡œì§

`ApartmentMatcher.match_apartment()`ëŠ” ì•„ë˜ì˜ ë³µí•©ì ì¸ ë§¤ì¹­ ì „ëµì„ ì‚¬ìš©í•©ë‹ˆë‹¤:

#### 2.1 ì •ê·œí™” ë° ì „ì²˜ë¦¬
```python
# ê³µë°± ì œê±°
# ì˜ë¬¸ ì†Œë¬¸ì ë³€í™˜
# ë¡œë§ˆìˆ«ì â†’ ì•„ë¼ë¹„ì•„ ìˆ«ì (â…¡ â†’ 2)
# ì˜ë¬¸ ë¸Œëœë“œëª… â†’ í•œê¸€ í†µì¼ (Xi â†’ ìì´)
# íŠ¹ìˆ˜ë¬¸ì ì œê±°
```

#### 2.2 Veto ì¡°ê±´ (ì¦‰ì‹œ ì œì™¸)

ë‹¤ìŒ ì¡°ê±´ ì¤‘ í•˜ë‚˜ë¼ë„ í•´ë‹¹í•˜ë©´ **ì¦‰ì‹œ ì œì™¸**ë©ë‹ˆë‹¤:

| Veto ì¡°ê±´ | ì„¤ëª… | ì˜ˆì‹œ |
|----------|------|------|
| ê±´ì¶•ë…„ë„ 3ë…„ ì´ˆê³¼ ì°¨ì´ | APIì™€ DBì˜ ê±´ì¶•ë…„ë„ ì°¨ì´ê°€ 3ë…„ ì´ˆê³¼ | API: 2015, DB: 2010 â†’ âŒ |
| ë‹¨ì§€ë²ˆí˜¸ ë¶ˆì¼ì¹˜ | ë‘˜ ë‹¤ ë‹¨ì§€ë²ˆí˜¸ê°€ ìˆëŠ”ë° ë‹¤ë¦„ | "7ë‹¨ì§€" vs "4ë‹¨ì§€" â†’ âŒ |
| ì°¨ìˆ˜ ë¶ˆì¼ì¹˜ | ë‘˜ ë‹¤ ì°¨ìˆ˜ê°€ ìˆëŠ”ë° ë‹¤ë¦„ | "1ì°¨" vs "2ì°¨" â†’ âŒ |
| ì£¼ìš” ë¸Œëœë“œ ë¶ˆì¼ì¹˜ | ì£¼ìš” ë¸Œëœë“œê°€ ìˆëŠ”ë° ì„œë¡œ ë‹¤ë¦„ | "ìì´" vs "ë˜ë¯¸ì•ˆ" â†’ âŒ |
| ê´„í˜¸ ì•ˆ ë¸Œëœë“œ ë¶ˆì¼ì¹˜ | ê´„í˜¸ ì•ˆ ë¸Œëœë“œëª…ì´ ë‹¤ë¦„ | "íš¨ìì´Œ(í˜„ëŒ€)" vs "íš¨ìì´Œ(ëŒ€ìš°)" â†’ âŒ |

#### 2.3 ì ìˆ˜ ê³„ì‚° ì „ëµ

ê° í›„ë³´ì— ëŒ€í•´ ì ìˆ˜ë¥¼ ê³„ì‚°í•˜ê³ , ê°€ì¥ ë†’ì€ ì ìˆ˜ì˜ ì•„íŒŒíŠ¸ë¥¼ ì„ íƒí•©ë‹ˆë‹¤:

| ë§¤ì¹­ ë°©ì‹ | ì ìˆ˜ | ì¡°ê±´ |
|----------|------|------|
| ì •ê·œí™” ì´ë¦„ ì •í™• ì¼ì¹˜ | 1.00 (ì¦‰ì‹œ ë°˜í™˜) | ì •ê·œí™” í›„ ì™„ì „ ì¼ì¹˜ |
| ë¸Œëœë“œ + ë‹¨ì§€ë²ˆí˜¸ ì¼ì¹˜ | 0.95 | ê°™ì€ ë¸Œëœë“œ, ê°™ì€ ë‹¨ì§€ë²ˆí˜¸ |
| ì§€ë²ˆ(ë³¸ë²ˆ+ë¶€ë²ˆ) + ë™ + ì•„íŒŒíŠ¸ëª… ì¼ì¹˜ | 0.98 | ë²•ì •ë™ ì½”ë“œëŠ” ë‹¤ë¥´ì§€ë§Œ ì§€ë²ˆ ì •ë³´ê°€ ì™„ì „ ì¼ì¹˜ |
| ì§€ë²ˆ(ë³¸ë²ˆ+ë¶€ë²ˆ) ì™„ì „ ì¼ì¹˜ | 0.85~0.96 | ì´ë¦„ ìœ ì‚¬ë„ì— ë”°ë¼ ì¡°ì • |
| ë¸Œëœë“œ + ë§ˆì„ëª… ì¼ì¹˜ | 0.90 | ê°™ì€ ë¸Œëœë“œ, ê°™ì€ ë§ˆì„ëª… |
| ìœ ì‚¬ë„ ë§¤ì¹­ | 0.60~0.95 | SequenceMatcher ìœ ì‚¬ë„ ê¸°ë°˜ |
| í¬í•¨ ê´€ê³„ | 0.70~0.90 | í•œìª½ì´ ë‹¤ë¥¸ ìª½ì„ í¬í•¨ |
| í‚¤ì›Œë“œ ë§¤ì¹­ | 0.55~0.90 | ê³µí†µ í‚¤ì›Œë“œ ë¹„ìœ¨ |

#### 2.4 ë™ì  ì„ê³„ê°’

í›„ë³´ ìˆ˜ì— ë”°ë¼ ë§¤ì¹­ ì„ê³„ê°’ì´ ë™ì ìœ¼ë¡œ ì¡°ì •ë©ë‹ˆë‹¤:

| í›„ë³´ ìˆ˜ | ì„ê³„ê°’ | ë¹„ê³  |
|--------|--------|------|
| 1ê°œ | 0.30 | í›„ë³´ê°€ í•˜ë‚˜ë¿ì´ì–´ë„ ìµœì†Œ ìœ ì‚¬ë„ í•„ìš” |
| 2~3ê°œ | 0.35 | ì ì€ í›„ë³´, ì¡°ê¸ˆ ë‚®ì€ ê¸°ì¤€ |
| 4~5ê°œ | 0.38 | ì¤‘ê°„ í›„ë³´ |
| 6~10ê°œ | 0.40 | ë§ì€ í›„ë³´ |
| 11ê°œ ì´ìƒ | 0.40 | ê¸°ë³¸ ì„ê³„ê°’ |
| ë™ ê²€ì¦ í•„ìˆ˜ | 0.70~0.80 | ì „ì²´ í›„ë³´ ì¬ì‹œë„ ì‹œ ë§¤ìš° ì—„ê²© |

---

## ë¯¸ìŠ¤ë§¤ì¹­ ë°œìƒ ì›ì¸

### 1. ì§€ì—­ ë²”ìœ„ê°€ ë„ˆë¬´ ë„“ìŒ

**ë¬¸ì œ:**
- ì‹œêµ°êµ¬ ì „ì²´(5ìë¦¬ ì½”ë“œ)ë¥¼ ëŒ€ìƒìœ¼ë¡œ í›„ë³´ë¥¼ ìˆ˜ì§‘
- ê°™ì€ ì´ë¦„ì˜ ì•„íŒŒíŠ¸ê°€ ë‹¤ë¥¸ ìë©´ë™ì— ì—¬ëŸ¬ ê°œ ì¡´ì¬í•  ìˆ˜ ìˆìŒ
- ì˜ˆ: "í•œë¹›ë§ˆì„7ë‹¨ì§€" â†’ ê°™ì€ ì‹œêµ°êµ¬ ë‚´ ë‹¤ë¥¸ ë™ì—ë„ "í•œë¹›ë§ˆì„" ì¡´ì¬

**ì˜í–¥:**
```
ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ (11680)
  â”œâ”€ ëŒ€ì¹˜ë™: ì€ë§ˆì•„íŒŒíŠ¸
  â”œâ”€ ë„ê³¡ë™: ì€ë§ˆì•„íŒŒíŠ¸
  â””â”€ ê°œí¬ë™: ì€ë§ˆì•„íŒŒíŠ¸

API: ëŒ€ì¹˜ë™ ì€ë§ˆì•„íŒŒíŠ¸
â†’ í›„ë³´: 3ê°œì˜ ì€ë§ˆì•„íŒŒíŠ¸ (ëŒ€ì¹˜ë™, ë„ê³¡ë™, ê°œí¬ë™)
â†’ ì´ë¦„ë§Œìœ¼ë¡œ ë§¤ì¹­ ì‹œ ì˜ëª»ëœ ë™ì˜ ì•„íŒŒíŠ¸ì™€ ë§¤ì¹­ë  ìœ„í—˜ âš ï¸
```

### 2. ë™(ìë©´ë™) ê²€ì¦ì˜ í•œê³„

**ë¬¸ì œ 1: ë™ ì´ë¦„ í‘œê¸° ë¶ˆì¼ì¹˜**
```
API: "ì˜ê´‘ì ë‹¨ì£¼ë¦¬"
DB:  "ë‹¨ì£¼ë¦¬"
â†’ ì •ê·œí™” ë¡œì§ìœ¼ë¡œ ë§¤ì¹­ ê°€ëŠ¥í•˜ì§€ë§Œ, ì˜ˆì™¸ ì¼€ì´ìŠ¤ ì¡´ì¬
```

**ë¬¸ì œ 2: ë™ ê²€ì¦ ì‹œì **
```python
# ì²« ì‹œë„: ë™ í•„í„°ë§ í›„ ì´ë¦„ ë§¤ì¹­ (require_dong_match ê¸°ë³¸ê°’ True)
matched_apt = ApartmentMatcher.match_apartment(..., require_dong_match=True)

# í•˜ì§€ë§Œ ë™ í•„í„°ë§ì´ ì‹¤íŒ¨í•˜ë©´ ì „ì²´ í›„ë³´ë¡œ ë³µì›
if not candidates:
    candidates = local_apts  # âš ï¸ ì „ì²´ í›„ë³´ë¡œ ë³µì›

# ì¬ì‹œë„: ì „ì²´ í›„ë³´ ëŒ€ìƒ (ë™ ê²€ì¦ í•„ìˆ˜)
matched_apt = ApartmentMatcher.match_apartment(..., require_dong_match=True)
```

**ë¬¸ì œ 3: ë™ ê²€ì¦ ë¡œì§ì˜ ëŠìŠ¨í•¨**
```python
# ë™ ê²€ì¦ ì¡°ê±´ (match_apartment í•¨ìˆ˜ ë‚´ë¶€, 1489~1508 ë¼ì¸)
dong_matches = (
    normalized_umd == normalized_matched_dong or
    (normalized_umd and normalized_matched_dong and 
     (normalized_umd in normalized_matched_dong or 
      normalized_matched_dong in normalized_umd))  # âš ï¸ ë¶€ë¶„ ì¼ì¹˜ í—ˆìš©
)
```

### 3. í›„ë³´ê°€ ì ì„ ë•Œ ê´€ëŒ€í•œ ë§¤ì¹­

**ë¬¸ì œ:**
```python
# í›„ë³´ê°€ 1ê°œì¼ ë•Œ ì„ê³„ê°’ 0.30 (ìƒí–¥ë˜ì—ˆì§€ë§Œ ì—¬ì „íˆ ë‚®ìŒ)
if len(candidates) == 1:
    threshold = 0.30  # âš ï¸ ìœ ì‚¬ë„ 30%ë§Œ ë„˜ìœ¼ë©´ ë§¤ì¹­
```

**ì‹¤ì œ ë¯¸ìŠ¤ë§¤ì¹­ ì¼€ì´ìŠ¤:**
```
API: "LGì‹ ì‚°ë³¸ìì´2ì°¨"
í›„ë³´ (ë™ í•„í„°ë§ í›„): ["ë‹¹ì •ë§ˆì„ì—˜ì§€"]

ìœ ì‚¬ë„ ê³„ì‚°:
- ì •ê·œí™”: "lgì‹ ì‚°ë³¸ìì´2ì°¨" vs "ë‹¹ì •ë§ˆì„ì—˜ì§€"
- í‚¤ì›Œë“œ: {"lg", "ì‹ ì‚°ë³¸", "ìì´", "2ì°¨"} vs {"ë‹¹ì •", "ë§ˆì„", "ì—˜ì§€"}
- ê³µí†µ: {"lg", "ì—˜ì§€"} â†’ ë¶€ë¶„ ì¼ì¹˜ë¡œ ì ìˆ˜ ìƒìŠ¹
- í›„ë³´ 1ê°œ â†’ ì„ê³„ê°’ 0.30
â†’ ì ìˆ˜ 0.35 â†’ ë§¤ì¹­ âŒ (Veto: ì£¼ìš” ë¸Œëœë“œ "ìì´" ë¶ˆì¼ì¹˜ë¡œ ì°¨ë‹¨)

âœ… í˜„ì¬ëŠ” Veto ì¡°ê±´ìœ¼ë¡œ ì°¨ë‹¨ë˜ì§€ë§Œ, Vetoê°€ ì—†ì—ˆë‹¤ë©´ ë¯¸ìŠ¤ë§¤ì¹­ ë°œìƒ
```

### 4. ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ ë§¤ì¹­ ì‹¤íŒ¨

**ë¬¸ì œ:**
- APIì—ì„œ ì œê³µí•˜ëŠ” ì§€ë²ˆ ì •ë³´ê°€ ë¶€ì •í™•í•˜ê±°ë‚˜ í˜•ì‹ì´ ë‹¤ë¦„
- DBì˜ ì§€ë²ˆ ì£¼ì†Œì™€ í˜•ì‹ì´ ë‹¬ë¼ì„œ ë§¤ì¹­ ì‹¤íŒ¨
- ì˜ˆ: API "ì§€êµ¬BL 34-7" vs DB "ê°€ì •2ì§€êµ¬34-7"

**ì˜í–¥:**
```
ë²•ì •ë™ ì½”ë“œ + ì§€ë²ˆ ë§¤ì¹­ ì‹¤íŒ¨
    â†“
ì´ë¦„ ê¸°ë°˜ ë§¤ì¹­ìœ¼ë¡œ fallback
    â†“
ë‹¤ë¥¸ ë™ì˜ ìœ ì‚¬í•œ ì´ë¦„ ì•„íŒŒíŠ¸ì™€ ë§¤ì¹­ë  ìœ„í—˜ âš ï¸
```

### 5. ë³µì¡í•œ ë§¤ì¹­ ë¡œì§ìœ¼ë¡œ ì¸í•œ ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥ì„±

**ë¬¸ì œ:**
- 10ë‹¨ê³„ ì´ìƒì˜ ë³µì¡í•œ ì ìˆ˜ ê³„ì‚°
- ë‹¤ì–‘í•œ ë³´ì • ê³„ìˆ˜ì™€ ì¡°ê±´
- ì˜ˆì™¸ ì¼€ì´ìŠ¤ê°€ ë§ì•„ ë””ë²„ê¹… ì–´ë ¤ì›€

**ì˜ˆì‹œ:**
```python
# ì§€ë²ˆ + ê±´ì¶•ë…„ë„ ì¼ì¹˜ ì‹œ ì ìˆ˜ 0.97
# í•˜ì§€ë§Œ ì´ë¦„ ìœ ì‚¬ë„ê°€ 0.15 ë¯¸ë§Œì´ë©´ ì ìˆ˜ ë¶€ì—¬ ì•ˆ í•¨
# í›„ë³´ê°€ 1ê°œë©´ ì„ê³„ê°’ 0.30
# ë™ ê²€ì¦ í•„ìˆ˜ë©´ ì„ê³„ê°’ 0.70
# ... ë“±ë“± ìˆ˜ì‹­ ê°œì˜ ì¡°ê±´
```

---

## í•´ê²° ë°©ì•ˆ

### ì›ì¹™

> **"ë§¤ì¹­ì´ ì•ˆ ë˜ë”ë¼ë„, ì˜ëª» ë§¤ì¹­ë˜ëŠ” ê²ƒì„ ìµœì†Œí™”í•œë‹¤."**

ë¯¸ìŠ¤ë§¤ì¹­ì€ ë°ì´í„° í’ˆì§ˆì— ì¹˜ëª…ì ì¸ ì˜í–¥ì„ ë¯¸ì¹˜ë¯€ë¡œ, **ê±°ì§“ ê¸ì„±(False Positive)ì„ ìµœì†Œí™”**í•˜ëŠ” ê²ƒì´ ìµœìš°ì„  ëª©í‘œì…ë‹ˆë‹¤.

### 1. ë™ ê²€ì¦ ê°•í™” (ìµœìš°ì„ )

#### 1.1 ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ ìš°ì„  ì‚¬ìš©

**ê°œì„  ì „:**
```python
# ì‹œêµ°êµ¬ 5ìë¦¬ë¡œ í›„ë³´ í•„í„°ë§
sgg_cd_db = convert_sgg_code_to_db_format(sgg_cd)  # 11680 â†’ 1168000000
```

**ê°œì„  í›„:**
```python
# APIì— ìë©´ë™ ì½”ë“œê°€ ìˆìœ¼ë©´ ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ë¡œ ì§ì ‘ í•„í„°ë§
if sgg_cd and umd_cd:
    full_region_code = f"{sgg_cd}{umd_cd}"  # 11680 + 10300 â†’ 1168010300
    candidates = [apt for apt in local_apts 
                  if apt.region_id in all_regions
                  and all_regions[apt.region_id].region_code == full_region_code]
```

**íš¨ê³¼:**
- ë™ ë‹¨ìœ„ë¡œ í›„ë³´ë¥¼ ì •í™•íˆ ì œí•œ
- ë‹¤ë¥¸ ë™ì˜ ì•„íŒŒíŠ¸ëŠ” ì• ì´ˆì— í›„ë³´ì—ì„œ ì œì™¸

#### 1.2 ë™ ê²€ì¦ ë¡œì§ ê°•í™”

**ê°œì„  ì „:**
```python
# ë¶€ë¶„ ì¼ì¹˜ í—ˆìš© (ë„ˆë¬´ ëŠìŠ¨í•¨)
dong_matches = (
    normalized_umd in normalized_matched_dong or 
    normalized_matched_dong in normalized_umd
)
```

**ê°œì„  í›„:**
```python
# ì •í™• ì¼ì¹˜ ë˜ëŠ” ì „ì²´-ë¶€ë¶„ ê´€ê³„ë§Œ í—ˆìš©
dong_matches = (
    normalized_umd == normalized_matched_dong or  # ì •í™• ì¼ì¹˜
    (len(normalized_umd) >= 2 and 
     len(normalized_matched_dong) >= 2 and
     (normalized_umd in normalized_matched_dong or  # ì „ì²´-ë¶€ë¶„ ê´€ê³„
      normalized_matched_dong in normalized_umd) and
     abs(len(normalized_umd) - len(normalized_matched_dong)) <= 2)  # ê¸¸ì´ ì°¨ì´ ì œí•œ
)
```

**íš¨ê³¼:**
- "ì‚¬ì§" vs "ì‚¬ì§1ë™" â†’ âœ… ë§¤ì¹­ (ê¸¸ì´ ì°¨ì´ 2)
- "ì‚¬ì§" vs "ì‹ ì‚¬ì§ë™" â†’ âŒ ë§¤ì¹­ ê±°ë¶€ (ê¸¸ì´ ì°¨ì´ 3)

#### 1.3 ë™ ê²€ì¦ ì‹¤íŒ¨ ì‹œ ë§¤ì¹­ ê±°ë¶€

**ê°œì„  ì „:**
```python
# ë™ í•„í„°ë§ ì‹¤íŒ¨ ì‹œ ì „ì²´ í›„ë³´ë¡œ ë³µì›
if not candidates:
    candidates = local_apts
```

**ê°œì„  í›„:**
```python
# ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ë¡œ í•„í„°ë§í•œ ê²½ìš°, í›„ë³´ê°€ ì—†ìœ¼ë©´ ë§¤ì¹­ ì‹¤íŒ¨ë¡œ ê°„ì£¼
if full_region_code and not candidates:
    # ë™ ê²€ì¦ ì‹¤íŒ¨ â†’ ë§¤ì¹­ ë¶ˆê°€
    matched_apt = None
    # ë¡œê¹… í›„ ë‹¤ìŒ ê±°ë˜ë¡œ ë„˜ì–´ê°
```

**íš¨ê³¼:**
- ë™ì´ ëª…í™•íˆ ë‹¤ë¥¸ ê²½ìš° ë§¤ì¹­ ì‹œë„í•˜ì§€ ì•ŠìŒ
- ë¯¸ìŠ¤ë§¤ì¹­ ë°©ì§€

### 2. ë§¤ì¹­ ì„ê³„ê°’ ìƒí–¥

#### 2.1 ê¸°ë³¸ ì„ê³„ê°’ ìƒí–¥

**ê°œì„  ì „:**
```python
threshold = 0.40  # ê¸°ë³¸
if len(candidates) == 1:
    threshold = 0.30  # í›„ë³´ 1ê°œ
```

**ê°œì„  í›„:**
```python
threshold = 0.50  # ê¸°ë³¸ (0.40 â†’ 0.50)
if len(candidates) == 1:
    threshold = 0.40  # í›„ë³´ 1ê°œ (0.30 â†’ 0.40)
elif len(candidates) <= 3:
    threshold = 0.45  # í›„ë³´ 2~3ê°œ (0.35 â†’ 0.45)
```

**íš¨ê³¼:**
- ìœ ì‚¬ë„ê°€ ë‚®ì€ ê²½ìš° ë§¤ì¹­ ê±°ë¶€
- ê±°ì§“ ê¸ì„± ê°ì†Œ

#### 2.2 ë™ ê²€ì¦ í•„ìˆ˜ ì‹œ ë” ì—„ê²©í•œ ê¸°ì¤€

**ê°œì„  ì „:**
```python
if require_dong_match:
    threshold = 0.70  # ë™ ê²€ì¦ í•„ìˆ˜ ì‹œ
```

**ê°œì„  í›„:**
```python
if require_dong_match:
    threshold = 0.75  # ë” ì—„ê²© (0.70 â†’ 0.75)
    if best_score >= 0.90:
        threshold = 0.75  # ê±°ì˜ í™•ì‹¤í•œ ê²½ìš°
    else:
        threshold = 0.85  # ê·¸ ì™¸ì—ëŠ” ë§¤ìš° ì—„ê²©
```

**íš¨ê³¼:**
- ì „ì²´ í›„ë³´ ì¬ì‹œë„ ì‹œ ê±°ì˜ í™•ì‹¤í•œ ê²½ìš°ë§Œ ë§¤ì¹­
- ë¯¸ìŠ¤ë§¤ì¹­ ìµœì†Œí™”

### 3. Veto ì¡°ê±´ ì¶”ê°€

#### 3.1 ë™ ë¶ˆì¼ì¹˜ Veto (ì‹ ê·œ)

**ì¶”ê°€:**
```python
# ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ê°€ ìˆëŠ”ë° ë¶ˆì¼ì¹˜í•˜ë©´ ì¦‰ì‹œ ì œì™¸
if full_region_code_api and full_region_code_db:
    if full_region_code_api != full_region_code_db:
        continue  # ë‹¤ë¥¸ ë™ â†’ ì¦‰ì‹œ ì œì™¸
```

**íš¨ê³¼:**
- ë™ì´ ëª…í™•íˆ ë‹¤ë¥¸ ê²½ìš° ë§¤ì¹­ ì‹œë„í•˜ì§€ ì•ŠìŒ

#### 3.2 ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ Veto (ê°•í™”)

**ì¶”ê°€:**
```python
# í›„ë³´ê°€ ì ì–´ë„ ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ ê¸°ì¤€ ì ìš©
MIN_NAME_SIMILARITY = 0.20

# ì •ê·œí™” ì´ë¦„ ìœ ì‚¬ë„ê°€ ìµœì†Œ ê¸°ì¤€ ë¯¸ë§Œì´ë©´ ì œì™¸
name_similarity = SequenceMatcher(None, normalized_api, normalized_db).ratio()
if name_similarity < MIN_NAME_SIMILARITY:
    # ì˜ˆì™¸: ë²•ì •ë™ ì½”ë“œ + ì§€ë²ˆ ì™„ì „ ì¼ì¹˜ì¸ ê²½ìš°ë§Œ í—ˆìš©
    if not (jibun_full_match and full_region_code_match):
        continue  # ì´ë¦„ ìœ ì‚¬ë„ ë„ˆë¬´ ë‚®ìŒ â†’ ì œì™¸
```

**íš¨ê³¼:**
- ì´ë¦„ì´ ì™„ì „íˆ ë‹¤ë¥¸ ì•„íŒŒíŠ¸ëŠ” ë§¤ì¹­ ì•ˆ ë¨
- ì˜ˆ: "LGì‹ ì‚°ë³¸ìì´2ì°¨" vs "ë‹¹ì •ë§ˆì„ì—˜ì§€" â†’ ìœ ì‚¬ë„ 0.15 â†’ ì œì™¸

### 4. ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§ ê°•í™”

#### 4.1 ë§¤ì¹­ ì‹¤íŒ¨ ë¡œê·¸

**ì¶”ê°€:**
```python
# ë§¤ì¹­ ì‹¤íŒ¨ ì‹œ ìƒì„¸ ì •ë³´ ê¸°ë¡
if not matched_apt:
    logger.warning(
        f"ë§¤ì¹­ ì‹¤íŒ¨: "
        f"ê±°ë˜ì›”={ym}, "
        f"ì‹œêµ°êµ¬={sgg_cd}, "
        f"ìë©´ë™={umd_nm}, "
        f"ì•„íŒŒíŠ¸ëª…={apt_nm}, "
        f"ì§€ë²ˆ={jibun}, "
        f"ê±´ì¶•ë…„ë„={build_year}, "
        f"í›„ë³´ìˆ˜={len(candidates)}"
    )
```

#### 4.2 ë§¤ì¹­ ì„±ê³µ ë¡œê·¸

**ì¶”ê°€:**
```python
# ë§¤ì¹­ ì„±ê³µ ì‹œ ìƒì„¸ ì •ë³´ ê¸°ë¡
if matched_apt:
    logger.info(
        f"ë§¤ì¹­ ì„±ê³µ: "
        f"API={apt_nm} â†’ "
        f"DB={matched_apt.apt_name}, "
        f"ì ìˆ˜={best_score:.2f}, "
        f"ë§¤ì¹­ë°©ì‹={matching_method}, "
        f"í›„ë³´ìˆ˜={len(candidates)}"
    )
```

#### 4.3 í†µê³„ ìˆ˜ì§‘

**ì¶”ê°€:**
```python
# ë§¤ì¹­ í†µê³„ ìˆ˜ì§‘
matching_stats = {
    'total': 0,                    # ì „ì²´ ê±°ë˜ ìˆ˜
    'matched_address_jibun': 0,    # ë²•ì •ë™+ì§€ë²ˆ ë§¤ì¹­ ìˆ˜
    'matched_name': 0,              # ì´ë¦„ ë§¤ì¹­ ìˆ˜
    'failed': 0,                    # ë§¤ì¹­ ì‹¤íŒ¨ ìˆ˜
    'failed_no_candidates': 0,      # í›„ë³´ ì—†ìŒ
    'failed_low_score': 0,          # ì ìˆ˜ ë¶€ì¡±
    'failed_veto': 0,               # Veto ì¡°ê±´
}
```

---

## êµ¬í˜„ ë‚´ìš©

### 1. ë™ ê²€ì¦ ê°•í™”

#### íŒŒì¼: `backend/app/services/data_collection/rent_collection/service.py`
#### íŒŒì¼: `backend/app/services/data_collection/sale_collection/service.py`

**ë³€ê²½ 1: ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ ìš°ì„  í•„í„°ë§**

```python
# ê¸°ì¡´ ì½”ë“œ (ë¼ì¸ 1066~1115)
# 0ë‹¨ê³„: ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ + ì§€ë²ˆ(ë¶€ë²ˆê¹Œì§€) ì •í™• ë§¤ì¹­ (ìµœìš°ì„ , ì´ë¦„ ë¬´ê´€)
if sgg_cd_item and umd_cd and jibun:
    full_region_code = f"{sgg_cd_item}{umd_cd}"
    matched_apt = ApartmentMatcher.match_by_address_and_jibun(...)

# ì¶”ê°€: ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ë¡œ í›„ë³´ ê°•ì œ ì œí•œ
if sgg_cd_item and umd_cd:
    full_region_code = f"{sgg_cd_item}{umd_cd}"
    # ğŸ”‘ ë²•ì •ë™ ì½”ë“œë¡œ í›„ë³´ ê°•ì œ í•„í„°ë§
    candidates = [
        apt for apt in local_apts
        if apt.region_id in all_regions
        and all_regions[apt.region_id].region_code == full_region_code
    ]
    
    if not candidates:
        # ë™ ê²€ì¦ ì‹¤íŒ¨ â†’ ë§¤ì¹­ ë¶ˆê°€
        logger.debug(
            f"âŒ ë²•ì •ë™ ì½”ë“œ ë¶ˆì¼ì¹˜: {full_region_code}, "
            f"ì•„íŒŒíŠ¸={apt_nm}, ì§€ë²ˆ={jibun}"
        )
        matched_apt = None
        # ë‹¤ìŒ ê±°ë˜ë¡œ ë„˜ì–´ê°
        continue
```

**ë³€ê²½ 2: ë™ í•„í„°ë§ ì‹¤íŒ¨ ì‹œ ì „ì²´ í›„ë³´ ë³µì› ì œê±°**

```python
# ê¸°ì¡´ ì½”ë“œ (ë¼ì¸ 1165~1169)
# í›„ë³´ê°€ ì—†ìœ¼ë©´ ì›ë˜ í›„ë³´ë¡œ ë³µì›
if not candidates:
    candidates = local_apts
    sgg_code_matched = True
    dong_matched = False

# ë³€ê²½ í›„:
# ë²•ì •ë™ ì½”ë“œë¡œ í•„í„°ë§í•œ ê²½ìš°, í›„ë³´ê°€ ì—†ìœ¼ë©´ ë§¤ì¹­ ì‹¤íŒ¨ë¡œ ê°„ì£¼
if not candidates and full_region_code:
    # ë™ ê²€ì¦ ì‹¤íŒ¨ â†’ ë§¤ì¹­ ë¶ˆê°€
    matched_apt = None
    error_count += 1
    logger.warning(
        f"âš ï¸ ë™ ê²€ì¦ ì‹¤íŒ¨ (í›„ë³´ ì—†ìŒ): "
        f"ë²•ì •ë™ì½”ë“œ={full_region_code}, "
        f"ì•„íŒŒíŠ¸={apt_nm}, "
        f"ì§€ë²ˆ={jibun}"
    )
    continue
elif not candidates:
    # ë²•ì •ë™ ì½”ë“œê°€ ì—†ëŠ” ê²½ìš°ë§Œ ì „ì²´ í›„ë³´ë¡œ ë³µì› (í•˜ìœ„ í˜¸í™˜ì„±)
    candidates = local_apts
    sgg_code_matched = True
    dong_matched = False
```

### 2. ë§¤ì¹­ ì„ê³„ê°’ ìƒí–¥

#### íŒŒì¼: `backend/app/services/data_collection/utils/matching.py`

**ë³€ê²½: ë™ì  ì„ê³„ê°’ ìƒí–¥ (ë¼ì¸ 1510~1531)**

```python
# ê¸°ì¡´ ì½”ë“œ
if require_dong_match:
    threshold = 0.70
    if best_score >= 0.90:
        threshold = 0.70
    elif best_score >= 0.80:
        threshold = 0.75
    else:
        threshold = 0.80
else:
    threshold = 0.40
    if len(candidates) == 1:
        threshold = 0.30
    elif len(candidates) <= 3:
        threshold = 0.35
    elif len(candidates) <= 5:
        threshold = 0.38
    elif len(candidates) <= 10:
        threshold = 0.40

# ë³€ê²½ í›„:
if require_dong_match:
    # ì „ì²´ í›„ë³´ ì¬ì‹œë„ ì‹œ ë” ë†’ì€ ì„ê³„ê°’ (ë¯¸ìŠ¤ë§¤ì¹­ ë°©ì§€)
    threshold = 0.75  # 0.70 â†’ 0.75
    if best_score >= 0.90:
        threshold = 0.75  # ê±°ì˜ í™•ì‹¤í•œ ê²½ìš°
    elif best_score >= 0.80:
        threshold = 0.80  # 0.75 â†’ 0.80
    else:
        threshold = 0.85  # 0.80 â†’ 0.85 (ë§¤ìš° ì—„ê²©)
else:
    # ì¼ë°˜ ë§¤ì¹­: í›„ë³´ ìˆ˜ì— ë”°ë¼ ë™ì  ì„ê³„ê°’ ì ìš©
    threshold = 0.50  # 0.40 â†’ 0.50 (ê¸°ë³¸ ìƒí–¥)
    if len(candidates) == 1:
        threshold = 0.40  # 0.30 â†’ 0.40 (í›„ë³´ 1ê°œ ìƒí–¥)
    elif len(candidates) <= 3:
        threshold = 0.45  # 0.35 â†’ 0.45 (í›„ë³´ 2~3ê°œ ìƒí–¥)
    elif len(candidates) <= 5:
        threshold = 0.48  # 0.38 â†’ 0.48 (í›„ë³´ 4~5ê°œ ìƒí–¥)
    elif len(candidates) <= 10:
        threshold = 0.50  # 0.40 â†’ 0.50 (í›„ë³´ 6~10ê°œ ìƒí–¥)
```

### 3. Veto ì¡°ê±´ ì¶”ê°€

#### íŒŒì¼: `backend/app/services/data_collection/utils/matching.py`

**ì¶”ê°€ 1: ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ Veto (ë¼ì¸ 949 ì´í›„)**

```python
# 0ë‹¨ê³„ ì§í›„: ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ ê²€ì¦
MIN_NAME_SIMILARITY = 0.20  # ìµœì†Œ ì´ë¦„ ìœ ì‚¬ë„

# ì •ê·œí™” ì´ë¦„ ìœ ì‚¬ë„ ê³„ì‚°
name_similarity = SequenceMatcher(
    None, 
    api_cache['normalized'], 
    db_cache['normalized']
).ratio()

# ğŸš« VETO: ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ ë¯¸ë‹¬
# ì˜ˆì™¸: ë²•ì •ë™ ì½”ë“œ + ì§€ë²ˆ ì™„ì „ ì¼ì¹˜ëŠ” í—ˆìš©
if name_similarity < MIN_NAME_SIMILARITY:
    # ì´ë¯¸ ë²•ì •ë™+ì§€ë²ˆ ë§¤ì¹­ìœ¼ë¡œ ì§„ì…í–ˆëŠ”ì§€ í™•ì¸
    # (ì´ ê²½ìš°ëŠ” Veto ì•ˆ í•¨)
    if not (jibun_full_match and full_region_code_match):
        logger.debug(
            f"âš ï¸ ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ ë¯¸ë‹¬: "
            f"{name_similarity:.2f} < {MIN_NAME_SIMILARITY}, "
            f"API={apt_name_api}, "
            f"DB={apt.apt_name}"
        )
        continue  # ì´ë¦„ ìœ ì‚¬ë„ ë„ˆë¬´ ë‚®ìŒ â†’ ì œì™¸
```

**ì¶”ê°€ 2: ë™ ê²€ì¦ ë¡œì§ ê°•í™” (ë¼ì¸ 1489~1508)**

```python
# ê¸°ì¡´ ì½”ë“œ
dong_matches = (
    normalized_umd == normalized_matched_dong or
    (normalized_umd and normalized_matched_dong and 
     (normalized_umd in normalized_matched_dong or 
      normalized_matched_dong in normalized_umd))
)

# ë³€ê²½ í›„:
# ì •í™• ì¼ì¹˜ ë˜ëŠ” ì „ì²´-ë¶€ë¶„ ê´€ê³„ë§Œ í—ˆìš© (ê¸¸ì´ ì°¨ì´ ì œí•œ)
dong_matches = False
if normalized_umd == normalized_matched_dong:
    # ì •í™• ì¼ì¹˜
    dong_matches = True
elif normalized_umd and normalized_matched_dong:
    # ì „ì²´-ë¶€ë¶„ ê´€ê³„ í™•ì¸ (ê¸¸ì´ ì°¨ì´ 2 ì´í•˜ë§Œ í—ˆìš©)
    if (normalized_umd in normalized_matched_dong or 
        normalized_matched_dong in normalized_umd):
        # ê¸¸ì´ ì°¨ì´ í™•ì¸
        len_diff = abs(len(normalized_umd) - len(normalized_matched_dong))
        if len_diff <= 2:
            dong_matches = True
        else:
            logger.debug(
                f"âš ï¸ ë™ ê¸¸ì´ ì°¨ì´ ì´ˆê³¼: "
                f"{len_diff} > 2, "
                f"API={umd_nm}, "
                f"DB={matched_dong}"
            )
```

### 4. ë¡œê¹… ê°•í™”

#### íŒŒì¼: `backend/app/services/data_collection/rent_collection/service.py`
#### íŒŒì¼: `backend/app/services/data_collection/sale_collection/service.py`

**ì¶”ê°€: ë§¤ì¹­ í†µê³„ ìˆ˜ì§‘ ë° ì¶œë ¥**

```python
# ë§¤ì¹­ í†µê³„ ì´ˆê¸°í™” (í•¨ìˆ˜ ì‹œì‘ ë¶€ë¶„)
matching_stats = {
    'total': 0,
    'matched_address_jibun': 0,
    'matched_name': 0,
    'failed': 0,
    'failed_no_candidates': 0,
    'failed_low_score': 0,
    'failed_veto': 0,
    'failed_dong_mismatch': 0,  # ì‹ ê·œ
}

# ê° ë§¤ì¹­ ì‹œë„ë§ˆë‹¤ í†µê³„ ì—…ë°ì´íŠ¸
matching_stats['total'] += 1

if matched_apt:
    if matching_method == 'address_jibun':
        matching_stats['matched_address_jibun'] += 1
    else:
        matching_stats['matched_name'] += 1
else:
    matching_stats['failed'] += 1
    # ì‹¤íŒ¨ ì›ì¸ ë¶„ë¥˜
    if not candidates:
        matching_stats['failed_no_candidates'] += 1
    elif not dong_matched:
        matching_stats['failed_dong_mismatch'] += 1
    else:
        matching_stats['failed_low_score'] += 1

# í•¨ìˆ˜ ì¢…ë£Œ ì‹œ í†µê³„ ì¶œë ¥
logger.info("=" * 60)
logger.info("ğŸ“Š ë§¤ì¹­ í†µê³„")
logger.info(f"   ì „ì²´ ê±°ë˜: {matching_stats['total']}")
logger.info(f"   ë§¤ì¹­ ì„±ê³µ: {matching_stats['matched_address_jibun'] + matching_stats['matched_name']}")
logger.info(f"     - ë²•ì •ë™+ì§€ë²ˆ: {matching_stats['matched_address_jibun']}")
logger.info(f"     - ì´ë¦„ ê¸°ë°˜: {matching_stats['matched_name']}")
logger.info(f"   ë§¤ì¹­ ì‹¤íŒ¨: {matching_stats['failed']}")
logger.info(f"     - í›„ë³´ ì—†ìŒ: {matching_stats['failed_no_candidates']}")
logger.info(f"     - ë™ ë¶ˆì¼ì¹˜: {matching_stats['failed_dong_mismatch']}")
logger.info(f"     - ì ìˆ˜ ë¶€ì¡±: {matching_stats['failed_low_score']}")
logger.info(f"   ë§¤ì¹­ë¥ : {(matching_stats['matched_address_jibun'] + matching_stats['matched_name']) / matching_stats['total'] * 100:.1f}%")
logger.info("=" * 60)
```

---

## ê²€ì¦ ë° ëª¨ë‹ˆí„°ë§

### 1. í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ 1: ê°™ì€ ì‹œêµ°êµ¬, ë‹¤ë¥¸ ë™ì˜ ê°™ì€ ì´ë¦„ ì•„íŒŒíŠ¸

**ë°ì´í„°:**
```
ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬ (11680)
  â”œâ”€ ëŒ€ì¹˜ë™ (1168010300): ì€ë§ˆì•„íŒŒíŠ¸
  â””â”€ ë„ê³¡ë™ (1168010400): ì€ë§ˆì•„íŒŒíŠ¸

API ê±°ë˜: ëŒ€ì¹˜ë™ ì€ë§ˆì•„íŒŒíŠ¸
```

**ì˜ˆìƒ ê²°ê³¼:**
- ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ë¡œ í›„ë³´ í•„í„°ë§ â†’ ëŒ€ì¹˜ë™ ì€ë§ˆì•„íŒŒíŠ¸ë§Œ í›„ë³´
- ë§¤ì¹­ ì„±ê³µ: ëŒ€ì¹˜ë™ ì€ë§ˆì•„íŒŒíŠ¸
- âœ… ë¯¸ìŠ¤ë§¤ì¹­ ë°©ì§€

#### ì‹œë‚˜ë¦¬ì˜¤ 2: ì´ë¦„ì´ ì™„ì „íˆ ë‹¤ë¥¸ ì•„íŒŒíŠ¸

**ë°ì´í„°:**
```
API: "LGì‹ ì‚°ë³¸ìì´2ì°¨"
í›„ë³´: ["ë‹¹ì •ë§ˆì„ì—˜ì§€"]
```

**ì˜ˆìƒ ê²°ê³¼:**
- ì´ë¦„ ìœ ì‚¬ë„: 0.15 < 0.20 (MIN_NAME_SIMILARITY)
- Veto: ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ ë¯¸ë‹¬
- ë§¤ì¹­ ì‹¤íŒ¨
- âœ… ë¯¸ìŠ¤ë§¤ì¹­ ë°©ì§€

#### ì‹œë‚˜ë¦¬ì˜¤ 3: ë²•ì •ë™ ì½”ë“œ + ì§€ë²ˆ ì™„ì „ ì¼ì¹˜

**ë°ì´í„°:**
```
API: ë²•ì •ë™=1168010300, ì§€ë²ˆ=627-41, ì•„íŒŒíŠ¸ëª…="ì€ë§ˆì•„íŒŒíŠ¸(1ë‹¨ì§€)"
DB:  ë²•ì •ë™=1168010300, ì§€ë²ˆ=627-41, ì•„íŒŒíŠ¸ëª…="ì€ë§ˆì•„íŒŒíŠ¸1ë‹¨ì§€"
```

**ì˜ˆìƒ ê²°ê³¼:**
- ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ + ì§€ë²ˆ ì •í™• ë§¤ì¹­ ì„±ê³µ
- ì´ë¦„ ë¬´ê´€í•˜ê²Œ ë§¤ì¹­
- âœ… ì •í™•í•œ ë§¤ì¹­

### 2. ëª¨ë‹ˆí„°ë§ ì§€í‘œ

#### 2.1 ë§¤ì¹­ë¥ 

```
ë§¤ì¹­ë¥  = (ë§¤ì¹­ ì„±ê³µ ìˆ˜ / ì „ì²´ ê±°ë˜ ìˆ˜) Ã— 100%
```

**ëª©í‘œ:**
- ë§¤ì¹­ë¥  75% ì´ìƒ (ë²•ì •ë™+ì§€ë²ˆ ë§¤ì¹­ í¬í•¨)
- ë²•ì •ë™+ì§€ë²ˆ ë§¤ì¹­ë¥  60% ì´ìƒ

#### 2.2 ì‹¤íŒ¨ ì›ì¸ ë¶„í¬

```
- í›„ë³´ ì—†ìŒ: ë™ ê²€ì¦ ì‹¤íŒ¨ ë˜ëŠ” í•´ë‹¹ ì§€ì—­ì— ì•„íŒŒíŠ¸ ì—†ìŒ
- ë™ ë¶ˆì¼ì¹˜: ë²•ì •ë™ ì½”ë“œ ë¶ˆì¼ì¹˜
- ì ìˆ˜ ë¶€ì¡±: ì´ë¦„ ìœ ì‚¬ë„ ë¶€ì¡±
- Veto ì¡°ê±´: ë‹¨ì§€ë²ˆí˜¸/ë¸Œëœë“œ ë¶ˆì¼ì¹˜, ê±´ì¶•ë…„ë„ ì°¨ì´ ë“±
```

**ëª©í‘œ:**
- í›„ë³´ ì—†ìŒ: 10% ì´í•˜ (DB ì»¤ë²„ë¦¬ì§€ í–¥ìƒ í•„ìš”)
- ë™ ë¶ˆì¼ì¹˜: 5% ì´í•˜ (API ë°ì´í„° í’ˆì§ˆ ì´ìŠˆ)
- ì ìˆ˜ ë¶€ì¡±: 10% ì´í•˜ (ì„ê³„ê°’ ì¡°ì • í•„ìš”)

#### 2.3 ë¯¸ìŠ¤ë§¤ì¹­ë¥  (ìˆ˜ë™ ê²€ì¦ í•„ìš”)

```
ë¯¸ìŠ¤ë§¤ì¹­ë¥  = (ì˜ëª» ë§¤ì¹­ëœ ìˆ˜ / ë§¤ì¹­ ì„±ê³µ ìˆ˜) Ã— 100%
```

**ëª©í‘œ:**
- ë¯¸ìŠ¤ë§¤ì¹­ë¥  1% ì´í•˜ (ê±°ì˜ ì—†ì–´ì•¼ í•¨)

### 3. ì•Œë¦¼ ë° ê²½ê³ 

#### 3.1 ë§¤ì¹­ë¥  ê¸‰ê° ì•Œë¦¼

```python
# ë§¤ì¹­ë¥ ì´ ê¸°ì¤€ì¹˜ ì´í•˜ë¡œ ë–¨ì–´ì§€ë©´ ì•Œë¦¼
if matching_rate < 70.0:
    logger.error(
        f"ğŸš¨ ë§¤ì¹­ë¥  ê¸‰ê° ê²½ê³ : {matching_rate:.1f}% < 70.0%"
    )
    # Slack/Email ì•Œë¦¼ ë°œì†¡
```

#### 3.2 ë™ ë¶ˆì¼ì¹˜ ê¸‰ì¦ ì•Œë¦¼

```python
# ë™ ë¶ˆì¼ì¹˜ ë¹„ìœ¨ì´ ê¸‰ì¦í•˜ë©´ ì•Œë¦¼
dong_mismatch_rate = (matching_stats['failed_dong_mismatch'] / 
                      matching_stats['total'] * 100)
if dong_mismatch_rate > 10.0:
    logger.error(
        f"ğŸš¨ ë™ ë¶ˆì¼ì¹˜ ê¸‰ì¦ ê²½ê³ : {dong_mismatch_rate:.1f}% > 10.0%"
    )
    # Slack/Email ì•Œë¦¼ ë°œì†¡
```

---

## ê²°ë¡ 

### ê°œì„  íš¨ê³¼ ìš”ì•½

| ê°œì„  í•­ëª© | ê¸°ëŒ€ íš¨ê³¼ |
|----------|----------|
| ë²•ì •ë™ ì½”ë“œ 10ìë¦¬ ìš°ì„  í•„í„°ë§ | ë™ ë‹¨ìœ„ë¡œ í›„ë³´ ì œí•œ, ë¯¸ìŠ¤ë§¤ì¹­ ëŒ€í­ ê°ì†Œ |
| ë™ ê²€ì¦ ì‹¤íŒ¨ ì‹œ ë§¤ì¹­ ê±°ë¶€ | ë™ì´ ëª…í™•íˆ ë‹¤ë¥¸ ê²½ìš° ë§¤ì¹­ ì•ˆ í•¨ |
| ë§¤ì¹­ ì„ê³„ê°’ ìƒí–¥ | ìœ ì‚¬ë„ ë‚®ì€ ê²½ìš° ë§¤ì¹­ ê±°ë¶€, ê±°ì§“ ê¸ì„± ê°ì†Œ |
| ì´ë¦„ ìµœì†Œ ìœ ì‚¬ë„ Veto | ì´ë¦„ì´ ì™„ì „íˆ ë‹¤ë¥¸ ì•„íŒŒíŠ¸ ë§¤ì¹­ ë°©ì§€ |
| ë™ ê²€ì¦ ë¡œì§ ê°•í™” | ë¶€ë¶„ ì¼ì¹˜ í—ˆìš© ë²”ìœ„ ì¶•ì†Œ, ì˜¤ë§¤ì¹­ ë°©ì§€ |
| ë¡œê¹… ë° í†µê³„ ìˆ˜ì§‘ | ë§¤ì¹­ í’ˆì§ˆ ëª¨ë‹ˆí„°ë§, ë¬¸ì œ ì¡°ê¸° ë°œê²¬ |

### íŠ¸ë ˆì´ë“œì˜¤í”„

**ì¥ì :**
- âœ… ë¯¸ìŠ¤ë§¤ì¹­ ëŒ€í­ ê°ì†Œ (ê±°ì§“ ê¸ì„± ìµœì†Œí™”)
- âœ… ë°ì´í„° í’ˆì§ˆ í–¥ìƒ
- âœ… ëª¨ë‹ˆí„°ë§ ë° ë””ë²„ê¹… ìš©ì´

**ë‹¨ì :**
- âš ï¸ ë§¤ì¹­ë¥  ì†Œí­ í•˜ë½ (ë” ì—„ê²©í•œ ê¸°ì¤€)
- âš ï¸ ë²•ì •ë™ ì½”ë“œ/ì§€ë²ˆ ì •ë³´ê°€ ë¶€ì •í™•í•œ ê²½ìš° ë§¤ì¹­ ì‹¤íŒ¨ ì¦ê°€

### í–¥í›„ ê°œì„  ë°©í–¥

1. **DB ì»¤ë²„ë¦¬ì§€ í–¥ìƒ**
   - ì•„íŒŒíŠ¸ ë°ì´í„° í™•ì¶©
   - ì§€ë²ˆ ì£¼ì†Œ ì •í™•ë„ í–¥ìƒ

2. **API ë°ì´í„° í’ˆì§ˆ ê°œì„ **
   - ë²•ì •ë™ ì½”ë“œ ì •í™•ë„ í™•ì¸
   - ì§€ë²ˆ í˜•ì‹ í†µì¼

3. **ë¨¸ì‹ ëŸ¬ë‹ ê¸°ë°˜ ë§¤ì¹­**
   - ê³¼ê±° ë§¤ì¹­ ë°ì´í„°ë¥¼ í•™ìŠµí•˜ì—¬ ë” ì •í™•í•œ ë§¤ì¹­
   - ì´ë¦„ ìœ ì‚¬ë„ + ë©”íƒ€ë°ì´í„° ë³µí•© ëª¨ë¸

4. **ìˆ˜ë™ ê²€ì¦ ë„êµ¬**
   - ë§¤ì¹­ ì‹¤íŒ¨ ì¼€ì´ìŠ¤ ë¦¬ë·°
   - ë¯¸ìŠ¤ë§¤ì¹­ ì˜ì‹¬ ì¼€ì´ìŠ¤ í”Œë˜ê¹…

---

**ì‘ì„±ì¼:** 2026-01-19  
**ì‘ì„±ì:** AI Assistant  
**ë¬¸ì„œ ë²„ì „:** 1.0
