# SweetHome 부동산 일정 관리 API 구현 가이드

추가 제안: Cursor에서 구현할 때의 핵심 포인트
API 키 관리: 공공데이터 API 키는 코드에 직접 넣지 말고 .env 파일에 저장하도록 Cursor에게 시키세요.

캐싱 로직: 공공데이터 API는 호출 횟수 제한이 있을 수 있습니다. 따라서 매번 호출하기보다 하루에 한 번 서버에서 가져와 DB에 저장(Caching)한 뒤, 사용자에게는 DB 데이터를 보여주는 방식을 추천합니다.

사용자 맞춤형 필터링: 사용자가 등록한 '내 자산'의 위치(시/군/구) 데이터를 기반으로, 해당 지역의 청약 일정만 상단에 보여주도록 쿼리를 짜달라고 요청해 보세요.


## 1. 개요
- 목적: 청약 일정, 분양 정보, 공휴일(특수일), 정기 세무 일정을 통합하여 사용자에게 제공하는 API 구축
- 기술 스택: Python (FastAPI), SQLAlchemy (DB), Pydantic (Schema)

## 2. 데이터 소스 구성
1) 공공데이터포털 (data.go.kr) API:
   - 한국부동산원_청약홈 분양정보: 아파트/오피스텔 청약 및 당첨자 발표일
   - 한국천문연구원_특수일 정보: 법정 공휴일 및 기념일 데이터
2) 내부 비즈니스 로직 (Fixed Dates):
   - 재산세 1차: 매년 7/16 ~ 7/31
   - 재산세 2차: 매년 9/16 ~ 9/30
   - 종합부동산세: 매년 12/1 ~ 12/15

## 3. 데이터베이스 스케마 설계 (SQLAlchemy)
- Table: `real_estate_schedules`
  - id (PK)
  - category: (청약, 분양, 세금, 공휴일)
  - title: 일정 명칭
  - start_date / end_date: 시작 및 종료일
  - region: 관련 행정구역 (시/군/구)
  - description: 상세 내용 또는 링크

## 4. 백엔드 구현 로직 (FastAPI)
1) 외부 API 호출용 서비스 클래스 (`ScheduleService`):
   - `fetch_subscription_data()`: 청약홈 API 연동 및 DB 캐싱 로직
   - `fetch_holidays()`: 공휴일 API 연동
2) 고정 일정 생성 함수:
   - 매년 초 또는 요청 시점에 세무 일정을 자동으로 생성하여 반환하는 로직
3) 통합 API 엔드포인트 (`GET /api/v1/schedules`):
   - 사용자의 관심 지역 및 보유 자산에 맞춘 필터링 기능 포함

## 5. Cursor에게 요청할 프롬프트 예시
"위 가이드를 참고하여, FastAPI에서 공공데이터 API를 호출하는 서비스 코드를 작성해 줘. 
특히 API 키는 환경 변수에서 가져오고, 중복 데이터를 방지하기 위해 DB에 저장하기 전 날짜와 제목을 체크하는 로직을 넣어줘. 
또한 프론트엔드 React에서 달력 형태로 쉽게 뿌릴 수 있도록 JSON 응답 형식을 최적화해 줘."