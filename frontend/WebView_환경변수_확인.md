# WebView 환경 변수 확인 가이드

## 🔍 문제 진단

**증상:** 모바일 앱(WebView)에서만 로그인 기능이 작동하지 않음

**원인:** Vite 서버가 환경 변수를 다시 로드하지 않음

## ✅ 해결 완료

1. ✅ Frontend 서버 재시작 완료
2. ✅ 환경 변수 로드 확인 필요

## 🧪 검증 실험

### 실험 A: 브라우저에서 환경 변수 확인

**목적:** Vite 서버가 환경 변수를 제대로 로드했는지 확인

**실행:**
1. 브라우저에서 `http://localhost:3000` 접속
2. 브라우저 콘솔(F12) 열기
3. 다음 명령어 실행:
   ```javascript
   console.log('환경 변수 확인:', import.meta.env.VITE_CLERK_PUBLISHABLE_KEY);
   ```

**기대 결과:**
- 정상: `"pk_test_YOUR_KEY_HERE"` (실제 키 값이 표시됨)
- 문제: `undefined` 또는 `""`

**결과 해석:**
- 정상이면 → WebView 문제 (쿠키/세션 등)
- 문제면 → 서버 재시작 필요

### 실험 B: WebView URL 직접 접속 테스트

**목적:** WebView가 접근하는 URL에서 환경 변수가 로드되는지 확인

**실행:**
1. 브라우저에서 `http://10.0.2.2:3000` 접속 (Android 에뮬레이터용)
2. 브라우저 콘솔에서 환경 변수 확인
3. 로그인 버튼 클릭 테스트

**기대 결과:**
- 정상: 로그인 모달이 표시됨
- 문제: 동일한 경고 메시지 표시

**결과 해석:**
- 정상이면 → WebView 설정 문제
- 문제면 → 서버 설정 문제

### 실험 C: 모바일 앱 콘솔 로그 확인

**목적:** WebView에서 환경 변수가 로드되는지 확인

**실행:**
1. 모바일 앱 재시작
2. Expo 개발자 도구 또는 Android Studio Logcat에서 로그 확인
3. 다음 로그 찾기:
   ```
   🔑 Clerk Key 로드 상태: { hasKey: true/false, ... }
   ```

**기대 결과:**
- 정상: `hasKey: true`
- 문제: `hasKey: false`

**결과 해석:**
- 정상이면 → 다른 문제 (쿠키/세션 등)
- 문제면 → 환경 변수 로드 실패

## 🚀 즉시 적용 가능한 수정

**Frontend 서버 재시작 (이미 완료):**
```bash
cd frontend
npm run dev
```

**확인:**
1. 브라우저에서 `http://localhost:3000` 접속
2. 콘솔에서 `🔑 Clerk Key 로드 상태` 로그 확인
3. `hasKey: true`인지 확인

## 📋 재발 방지

1. **환경 변수 변경 후 반드시 서버 재시작**
2. **서버 시작 시 환경 변수 로드 확인 로그 추가**
3. **WebView 디버깅 로그 유지**

## 🔄 다음 단계

위의 실험 A, B, C를 순서대로 실행하고 결과를 알려주세요:
- 실험 A 결과: `정상` 또는 `문제` + 콘솔 출력값
- 실험 B 결과: `정상` 또는 `문제`
- 실험 C 결과: `hasKey: true` 또는 `hasKey: false`

결과에 따라 추가 수정을 진행하겠습니다.
